name: kavanest-api

namespace: kavanest
env:
  APP_VERSION: 0f1f57f195a7527c1ac6ecb3f5ab4b8076bd793b

deployment:
  - name: kavanest-api
    image: invisibug/kavanest-api
    ports:
    - port: 4000
    env:
    - name: MONGO
      value: mongodb://kavanest-mongo:27017

    - name: MQTT
      value: mqtt://mqtt.kavanet.io

    # - name: NODE_ENV
    #   value: production

ingress:
  - name: api.kavanet.io
    selector: kavanest-api
    path: /
    port: 4000
    host: api.kavanet.io

service:
  loadBalancer:
    - name: kavanest-api
      selector: kavanest-api
      port: 80
      containerPort: 4000
